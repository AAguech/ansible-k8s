---

- name: Create a directory if it does not exist
  ansible.builtin.file:
    path: /home/kub/amira
    state: directory
    mode: '0755'

- name: Change file ownership, group and permissions
  ansible.builtin.file:
    path: /var/run/docker.sock
    owner: root
    group: docker
    mode: '666'
  ansible_become: yes
  ansible_become_user: root
  ansible_become_method: enable
  

- name: Log into DockerHub
  docker_login:
    username: aguech
    password: Lasmar.eline2021
    email: amira.aguech.lasmar@gmail.com


- name: pull an image
  docker_image:
    name: hello-world
    pull: yes
#  become: yes
    #username: aguech
   # password: Lasmar.eline2021
- name: log to jfrog 
  docker_login:
    registry: sncf.jfrog.io/docker-amira-local
    username: amira.aguech.lasmar@gmail.com
    password: Lasmar&eline2021

- name: Build an image and push it to a private repo
  docker_image:
    path: hello-world
    name: sncf.jfrog.io/docker-amira-local/hello-world
    tag: latest
    push: yes